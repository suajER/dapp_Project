{"ast":null,"code":"var _jsxFileName = \"D:\\\\reactDAPP\\\\client\\\\src\\\\components\\\\SignIn.js\";\nimport React, { Component } from \"react\";\nimport web3Connection from './web3Connection';\nimport Contract from './Contract';\nimport Formate from './utils/Formate';\nimport 'semantic-ui-css/semantic.min.css';\nimport { Menu, Divider } from \"semantic-ui-react\";\nimport { BrowserRouter, Switch, Route, Link, Redirect } from 'react-router-dom';\nimport Home from './components/Home';\nimport SignUp from \"./components/SignUp\";\nimport SignIn from \"./components/SignIn\";\nimport SignOut from \"./components/SignOut\";\nimport UserAccount from './components/UserAccount';\nimport \"./App.css\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      web3: null,\n      account: null,\n      contract: null,\n      balance: null,\n      activeItem: 'home',\n      signedUp: false,\n      loggedIn: false,\n      username: '' //color: 'teal'\n\n    };\n\n    this.handleItemClick = (e, {\n      name\n    }) => this.setState({\n      activeItem: name,\n      color: 'teal'\n    });\n\n    this.componentDidMount = async () => {\n      try {\n        const web3 = await web3Connection();\n        const contract = await Contract(web3);\n        const accounts = await web3.eth.getAccounts();\n        this.setState({\n          web3,\n          contract,\n          account: accounts[0]\n        }, this.start);\n      } catch (error) {\n        alert(\"Failed to load web3\");\n        console.error(error);\n      }\n\n      await this.getAccount();\n    };\n\n    this.start = async () => {\n      await this.getAccount();\n      const _this$state = this.state,\n            web3 = _this$state.web3,\n            contract = _this$state.contract,\n            account = _this$state.account;\n      console.log(\"web3 =\", web3);\n      console.log(\"Contract =\", contract);\n      console.log(\"Acoount =\", account);\n    };\n\n    this.getAccount = async () => {\n      if (this.state.web3 !== null || this.state.web3 !== undefined) {\n        await window.ethereum.on('accountsChanged', async accounts => {\n          this.setState({\n            account: accounts[0],\n            loggedIn: false\n          });\n          this.state.web3.eth.getBalance(accounts[0], (err, balance) => {\n            if (!err) {\n              this.setState({\n                balance: Formate(this.state.web3.utils.fromWei(balance, 'ether'))\n              });\n            }\n          });\n        });\n      }\n    };\n\n    this.accountCreated = async signedUp => {\n      this.setState({\n        signedUp\n      });\n    };\n\n    this.userSignedIn = async (loggedIn, username) => {\n      this.setState({\n        loggedIn,\n        username\n      });\n    };\n\n    this.loggedOut = async loggedIn => {\n      this.setState({\n        loggedIn\n      });\n    };\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          activeItem = _this$state2.activeItem,\n          color = _this$state2.color;\n\n    if (!this.state.web3) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Loading Web3, accounts, and contract...\");\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"home-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Menu, {\n      stackable: true,\n      inverted: true,\n      secondary: true,\n      size: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Menu.Item, {\n      name: \"home\",\n      color: color,\n      active: activeItem === 'home',\n      onClick: this.handleItemClick,\n      as: Link,\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"help\",\n      color: color,\n      active: activeItem === 'help',\n      onClick: this.handleItemClick,\n      as: Link,\n      to: \"/help\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), this.state.loggedIn ? React.createElement(Menu.Item, {\n      position: \"right\",\n      name: \"user account\",\n      color: color,\n      active: activeItem === 'user account',\n      onClick: this.handleItemClick,\n      as: Link,\n      to: \"/user-account\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }) : console.log(''), !this.state.loggedIn ? React.createElement(Menu.Item, {\n      position: \"right\",\n      name: \"sign in\",\n      color: color,\n      active: activeItem === 'sign in',\n      onClick: this.handleItemClick,\n      as: Link,\n      to: \"/sign-in\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }) : console.log(''), this.state.loggedIn ? React.createElement(Menu.Item, {\n      name: \"sign out\",\n      color: \"red\",\n      active: activeItem === 'sign out',\n      onClick: this.handleItemClick,\n      as: Link,\n      to: \"/sign-out\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }) : React.createElement(Menu.Item, {\n      name: \"sign up\",\n      color: color,\n      active: activeItem === 'sign up',\n      onClick: this.handleItemClick,\n      as: Link,\n      to: \"/sign-up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }))), React.createElement(Divider, {\n      inverted: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Home, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/help\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Help page\"), this.state.loggedIn ? React.createElement(Route, {\n      path: \"/user-account\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(UserAccount, {\n      account: this.state.account,\n      username: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })) : React.createElement(Route, {\n      path: \"/user-account\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"You have been logged out\"), React.createElement(Route, {\n      path: \"/sign-in\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, this.state.loggedIn ? React.createElement(Redirect, {\n      to: \"/user-account\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }) : React.createElement(SignIn, {\n      web3: this.state.web3,\n      contract: this.state.contract,\n      account: this.state.account,\n      signedUp: this.state.signedUp,\n      userSignedIn: this.userSignedIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    })), this.state.loggedIn ? React.createElement(Route, {\n      path: \"/sign-out\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(SignOut, {\n      loggedOut: this.loggedOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), \"You've been logged out\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), \"Thank you\") : React.createElement(Route, {\n      path: \"/sign-up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(SignUp, {\n      web3: this.state.web3,\n      contract: this.state.contract,\n      account: this.state.account,\n      accountCreated: this.accountCreated,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/reactDAPP/client/src/components/SignIn.js"],"names":["React","Component","web3Connection","Contract","Formate","Menu","Divider","BrowserRouter","Switch","Route","Link","Redirect","Home","SignUp","SignIn","SignOut","UserAccount","App","state","web3","account","contract","balance","activeItem","signedUp","loggedIn","username","handleItemClick","e","name","setState","color","componentDidMount","accounts","eth","getAccounts","start","error","alert","console","getAccount","log","undefined","window","ethereum","on","getBalance","err","utils","fromWei","accountCreated","userSignedIn","loggedOut","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAO,kCAAP;AACA,SAASC,IAAT,EAAeC,OAAf,QAA8B,mBAA9B;AACA,SAASC,aAAT,EAAwBC,MAAxB,EAAgCC,KAAhC,EAAuCC,IAAvC,EAA6CC,QAA7C,QAA6D,kBAA7D;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAO,WAAP;;AAEA,MAAMC,GAAN,SAAkBhB,SAAlB,CAA4B;AAAA;AAAA;AAAA,SAC1BiB,KAD0B,GAClB;AACNC,MAAAA,IAAI,EAAE,IADA;AAENC,MAAAA,OAAO,EAAE,IAFH;AAGNC,MAAAA,QAAQ,EAAE,IAHJ;AAINC,MAAAA,OAAO,EAAE,IAJH;AAKNC,MAAAA,UAAU,EAAE,MALN;AAMNC,MAAAA,QAAQ,EAAE,KANJ;AAONC,MAAAA,QAAQ,EAAE,KAPJ;AAQNC,MAAAA,QAAQ,EAAE,EARJ,CASN;;AATM,KADkB;;AAAA,SAa1BC,eAb0B,GAaR,CAACC,CAAD,EAAI;AAAEC,MAAAA;AAAF,KAAJ,KAAiB,KAAKC,QAAL,CAAc;AAAEP,MAAAA,UAAU,EAAEM,IAAd;AAAoBE,MAAAA,KAAK,EAAE;AAA3B,KAAd,CAbT;;AAAA,SAe1BC,iBAf0B,GAeN,YAAY;AAC9B,UAAI;AACF,cAAMb,IAAI,GAAG,MAAMjB,cAAc,EAAjC;AACA,cAAMmB,QAAQ,GAAG,MAAMlB,QAAQ,CAACgB,IAAD,CAA/B;AACA,cAAMc,QAAQ,GAAG,MAAMd,IAAI,CAACe,GAAL,CAASC,WAAT,EAAvB;AAEA,aAAKL,QAAL,CAAc;AAAEX,UAAAA,IAAF;AAAQE,UAAAA,QAAR;AAAkBD,UAAAA,OAAO,EAAEa,QAAQ,CAAC,CAAD;AAAnC,SAAd,EAAwD,KAAKG,KAA7D;AACD,OAND,CAME,OAAOC,KAAP,EAAc;AACdC,QAAAA,KAAK,uBAAL;AAGAC,QAAAA,OAAO,CAACF,KAAR,CAAcA,KAAd;AACD;;AAED,YAAM,KAAKG,UAAL,EAAN;AACD,KA9ByB;;AAAA,SAgC1BJ,KAhC0B,GAgClB,YAAY;AAClB,YAAM,KAAKI,UAAL,EAAN;AADkB,0BAEkB,KAAKtB,KAFvB;AAAA,YAEVC,IAFU,eAEVA,IAFU;AAAA,YAEJE,QAFI,eAEJA,QAFI;AAAA,YAEMD,OAFN,eAEMA,OAFN;AAIlBmB,MAAAA,OAAO,CAACE,GAAR,CAAY,QAAZ,EAAsBtB,IAAtB;AACAoB,MAAAA,OAAO,CAACE,GAAR,CAAY,YAAZ,EAA0BpB,QAA1B;AACAkB,MAAAA,OAAO,CAACE,GAAR,CAAY,WAAZ,EAAyBrB,OAAzB;AACD,KAvCyB;;AAAA,SAyC1BoB,UAzC0B,GAyCb,YAAY;AACvB,UAAI,KAAKtB,KAAL,CAAWC,IAAX,KAAoB,IAApB,IAA4B,KAAKD,KAAL,CAAWC,IAAX,KAAoBuB,SAApD,EAA+D;AAC7D,cAAMC,MAAM,CAACC,QAAP,CAAgBC,EAAhB,CAAmB,iBAAnB,EAAsC,MAAOZ,QAAP,IAAoB;AAC9D,eAAKH,QAAL,CAAc;AACZV,YAAAA,OAAO,EAAEa,QAAQ,CAAC,CAAD,CADL;AAEZR,YAAAA,QAAQ,EAAE;AAFE,WAAd;AAKA,eAAKP,KAAL,CAAWC,IAAX,CAAgBe,GAAhB,CAAoBY,UAApB,CAA+Bb,QAAQ,CAAC,CAAD,CAAvC,EAA4C,CAACc,GAAD,EAAMzB,OAAN,KAAkB;AAC5D,gBAAI,CAACyB,GAAL,EAAU;AACR,mBAAKjB,QAAL,CAAc;AAAER,gBAAAA,OAAO,EAAElB,OAAO,CAAC,KAAKc,KAAL,CAAWC,IAAX,CAAgB6B,KAAhB,CAAsBC,OAAtB,CAA8B3B,OAA9B,EAAuC,OAAvC,CAAD;AAAlB,eAAd;AACD;AACF,WAJD;AAKD,SAXK,CAAN;AAYD;AACF,KAxDyB;;AAAA,SA0D1B4B,cA1D0B,GA0DT,MAAO1B,QAAP,IAAoB;AACnC,WAAKM,QAAL,CAAc;AAAEN,QAAAA;AAAF,OAAd;AACD,KA5DyB;;AAAA,SA8D1B2B,YA9D0B,GA8DX,OAAO1B,QAAP,EAAiBC,QAAjB,KAA8B;AAC3C,WAAKI,QAAL,CAAc;AAAEL,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAd;AACD,KAhEyB;;AAAA,SAkE1B0B,SAlE0B,GAkEd,MAAO3B,QAAP,IAAoB;AAC9B,WAAKK,QAAL,CAAc;AAAEL,QAAAA;AAAF,OAAd;AACD,KApEyB;AAAA;;AAsE1B4B,EAAAA,MAAM,GAAG;AAAA,yBACuB,KAAKnC,KAD5B;AAAA,UACCK,UADD,gBACCA,UADD;AAAA,UACaQ,KADb,gBACaA,KADb;;AAGP,QAAI,CAAC,KAAKb,KAAL,CAAWC,IAAhB,EAAsB;AACpB,aAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAAP;AACD;;AACD,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAgB,MAAA,QAAQ,MAAxB;AAAyB,MAAA,SAAS,MAAlC;AAAmC,MAAA,IAAI,EAAC,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,KAAK,EAAEY,KAFT;AAGE,MAAA,MAAM,EAAER,UAAU,KAAK,MAHzB;AAIE,MAAA,OAAO,EAAE,KAAKI,eAJhB;AAKE,MAAA,EAAE,EAAEjB,IALN;AAME,MAAA,EAAE,EAAC,GANL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EASE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,KAAK,EAAEqB,KAFT;AAGE,MAAA,MAAM,EAAER,UAAU,KAAK,MAHzB;AAIE,MAAA,OAAO,EAAE,KAAKI,eAJhB;AAKE,MAAA,EAAE,EAAEjB,IALN;AAME,MAAA,EAAE,EAAC,OANL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,EAkBI,KAAKQ,KAAL,CAAWO,QAAX,GACE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,QAAQ,EAAC,OADX;AAEE,MAAA,IAAI,EAAC,cAFP;AAGE,MAAA,KAAK,EAAEM,KAHT;AAIE,MAAA,MAAM,EAAER,UAAU,KAAK,cAJzB;AAKE,MAAA,OAAO,EAAE,KAAKI,eALhB;AAME,MAAA,EAAE,EAAEjB,IANN;AAOE,MAAA,EAAE,EAAC,eAPL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,GAWE6B,OAAO,CAACE,GAAR,CAAY,EAAZ,CA7BN,EAgCI,CAAC,KAAKvB,KAAL,CAAWO,QAAZ,GACE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,QAAQ,EAAC,OADX;AAEE,MAAA,IAAI,EAAC,SAFP;AAGE,MAAA,KAAK,EAAEM,KAHT;AAIE,MAAA,MAAM,EAAER,UAAU,KAAK,SAJzB;AAKE,MAAA,OAAO,EAAE,KAAKI,eALhB;AAME,MAAA,EAAE,EAAEjB,IANN;AAOE,MAAA,EAAE,EAAC,UAPL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,GAWE6B,OAAO,CAACE,GAAR,CAAY,EAAZ,CA3CN,EA+CI,KAAKvB,KAAL,CAAWO,QAAX,GACE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,KAAK,EAAC,KAFR;AAGE,MAAA,MAAM,EAAEF,UAAU,KAAK,UAHzB;AAIE,MAAA,OAAO,EAAE,KAAKI,eAJhB;AAKE,MAAA,EAAE,EAAEjB,IALN;AAME,MAAA,EAAE,EAAC,WANL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,GAUE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,IAAI,EAAC,SADP;AAEE,MAAA,KAAK,EAAEqB,KAFT;AAGE,MAAA,MAAM,EAAER,UAAU,KAAK,SAHzB;AAIE,MAAA,OAAO,EAAE,KAAKI,eAJhB;AAKE,MAAA,EAAE,EAAEjB,IALN;AAME,MAAA,EAAE,EAAC,UANL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzDN,CADF,CADF,EAsEE,oBAAC,OAAD;AAAS,MAAA,QAAQ,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtEF,EAwEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,GAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,EAIE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF,EAQI,KAAKQ,KAAL,CAAWO,QAAX,GACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,eAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AACE,MAAA,OAAO,EAAE,KAAKP,KAAL,CAAWE,OADtB;AAEE,MAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWQ,QAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,GAQE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,eAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAhBN,EAqBI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI,KAAKR,KAAL,CAAWO,QAAX,GACE,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,GAGE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAE,KAAKP,KAAL,CAAWC,IADnB;AAEE,MAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWG,QAFvB;AAGE,MAAA,OAAO,EAAE,KAAKH,KAAL,CAAWE,OAHtB;AAIE,MAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWM,QAJvB;AAKE,MAAA,YAAY,EAAE,KAAK2B,YALrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALN,CArBJ,EAsCI,KAAKjC,KAAL,CAAWO,QAAX,GACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,OAAD;AACE,MAAA,SAAS,EAAE,KAAK2B,SADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,4BAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,cADF,GAUE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAE,KAAKlC,KAAL,CAAWC,IADnB;AAEE,MAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWG,QAFvB;AAGE,MAAA,OAAO,EAAE,KAAKH,KAAL,CAAWE,OAHtB;AAIE,MAAA,cAAc,EAAE,KAAK8B,cAJvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAhDN,CAxEF,CADF,CADF,CADF;AAyID;;AArNyB;;AAwN5B,eAAejC,GAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport web3Connection from './web3Connection';\r\nimport Contract from './Contract';\r\nimport Formate from './utils/Formate';\r\nimport 'semantic-ui-css/semantic.min.css'\r\nimport { Menu, Divider } from \"semantic-ui-react\";\r\nimport { BrowserRouter, Switch, Route, Link, Redirect } from 'react-router-dom';\r\nimport Home from './components/Home';\r\nimport SignUp from \"./components/SignUp\";\r\nimport SignIn from \"./components/SignIn\"\r\nimport SignOut from \"./components/SignOut\";\r\nimport UserAccount from './components/UserAccount';\r\nimport \"./App.css\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    web3: null,\r\n    account: null,\r\n    contract: null,\r\n    balance: null,\r\n    activeItem: 'home',\r\n    signedUp: false,\r\n    loggedIn: false,\r\n    username: ''\r\n    //color: 'teal'\r\n  };\r\n\r\n  handleItemClick = (e, { name }) => this.setState({ activeItem: name, color: 'teal' })\r\n\r\n  componentDidMount = async () => {\r\n    try {\r\n      const web3 = await web3Connection();\r\n      const contract = await Contract(web3);\r\n      const accounts = await web3.eth.getAccounts();\r\n\r\n      this.setState({ web3, contract, account: accounts[0] }, this.start);\r\n    } catch (error) {\r\n      alert(\r\n        `Failed to load web3`,\r\n      );\r\n      console.error(error);\r\n    }\r\n\r\n    await this.getAccount();\r\n  };\r\n\r\n  start = async () => {\r\n    await this.getAccount();\r\n    const { web3, contract, account } = this.state;\r\n\r\n    console.log(\"web3 =\", web3);\r\n    console.log(\"Contract =\", contract);\r\n    console.log(\"Acoount =\", account);\r\n  };\r\n\r\n  getAccount = async () => {\r\n    if (this.state.web3 !== null || this.state.web3 !== undefined) {\r\n      await window.ethereum.on('accountsChanged', async (accounts) => {\r\n        this.setState({\r\n          account: accounts[0],\r\n          loggedIn: false\r\n        });\r\n\r\n        this.state.web3.eth.getBalance(accounts[0], (err, balance) => {\r\n          if (!err) {\r\n            this.setState({ balance: Formate(this.state.web3.utils.fromWei(balance, 'ether')) });\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  accountCreated = async (signedUp) => {\r\n    this.setState({ signedUp });\r\n  }\r\n\r\n  userSignedIn = async (loggedIn, username) => {\r\n    this.setState({ loggedIn, username });\r\n  }\r\n\r\n  loggedOut = async (loggedIn) => {\r\n    this.setState({ loggedIn });\r\n  }\r\n\r\n  render() {\r\n    const { activeItem, color } = this.state;\r\n\r\n    if (!this.state.web3) {\r\n      return <div>Loading Web3, accounts, and contract...</div>;\r\n    }\r\n    return (\r\n      <div className=\"App\">\r\n        <div className=\"main-page\">\r\n          <BrowserRouter>\r\n            <div className=\"home-nav\">\r\n              <Menu stackable inverted secondary size='large'>\r\n                <Menu.Item\r\n                  name='home'\r\n                  color={color}\r\n                  active={activeItem === 'home'}\r\n                  onClick={this.handleItemClick}\r\n                  as={Link}\r\n                  to='/'\r\n                />\r\n                <Menu.Item\r\n                  name='help'\r\n                  color={color}\r\n                  active={activeItem === 'help'}\r\n                  onClick={this.handleItemClick}\r\n                  as={Link}\r\n                  to='/help'\r\n                />\r\n                {\r\n                  this.state.loggedIn ?\r\n                    <Menu.Item\r\n                      position='right'\r\n                      name='user account'\r\n                      color={color}\r\n                      active={activeItem === 'user account'}\r\n                      onClick={this.handleItemClick}\r\n                      as={Link}\r\n                      to='/user-account'\r\n                    />\r\n                    :\r\n                    console.log('')\r\n                }\r\n                {\r\n                  !this.state.loggedIn ?\r\n                    <Menu.Item\r\n                      position='right'\r\n                      name='sign in'\r\n                      color={color}\r\n                      active={activeItem === 'sign in'}\r\n                      onClick={this.handleItemClick}\r\n                      as={Link}\r\n                      to='/sign-in'\r\n                    />\r\n                    :\r\n                    console.log('')\r\n                }\r\n\r\n                {\r\n                  this.state.loggedIn ?\r\n                    <Menu.Item\r\n                      name='sign out'\r\n                      color='red'\r\n                      active={activeItem === 'sign out'}\r\n                      onClick={this.handleItemClick}\r\n                      as={Link}\r\n                      to='/sign-out'\r\n                    />\r\n                    :\r\n                    <Menu.Item\r\n                      name='sign up'\r\n                      color={color}\r\n                      active={activeItem === 'sign up'}\r\n                      onClick={this.handleItemClick}\r\n                      as={Link}\r\n                      to='/sign-up'\r\n                    />\r\n                }\r\n              </Menu>\r\n            </div>\r\n            <Divider inverted />\r\n\r\n            <Switch>\r\n              <Route exact path='/' >\r\n                <Home />\r\n              </Route>\r\n              <Route path='/help' >\r\n                Help page\r\n              </Route>\r\n              {\r\n                this.state.loggedIn ?\r\n                  <Route path='/user-account' >\r\n                    <UserAccount\r\n                      account={this.state.account}\r\n                      username={this.state.username}\r\n                    />\r\n                  </Route>\r\n                  :\r\n                  <Route path='/user-account'>\r\n                    You have been logged out\r\n                  </Route>\r\n              }\r\n              {\r\n                <Route path='/sign-in' >\r\n                  {\r\n                    this.state.loggedIn ?\r\n                      <Redirect to='/user-account' />\r\n                      :\r\n                      <SignIn\r\n                        web3={this.state.web3}\r\n                        contract={this.state.contract}\r\n                        account={this.state.account}\r\n                        signedUp={this.state.signedUp}\r\n                        userSignedIn={this.userSignedIn}\r\n                      />\r\n                  }\r\n                </Route>\r\n              }\r\n\r\n              {\r\n                this.state.loggedIn ?\r\n                  <Route path='/sign-out'>\r\n                    <SignOut\r\n                      loggedOut={this.loggedOut}\r\n                    />\r\n                    You've been logged out\r\n                    <br></br>\r\n                    Thank you\r\n                  </Route>\r\n                  :\r\n                  <Route path='/sign-up' >\r\n                    <SignUp\r\n                      web3={this.state.web3}\r\n                      contract={this.state.contract}\r\n                      account={this.state.account}\r\n                      accountCreated={this.accountCreated}\r\n                    />\r\n                  </Route>\r\n              }\r\n            </Switch>\r\n          </BrowserRouter>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}